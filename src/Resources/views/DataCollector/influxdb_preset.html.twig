{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        <img width="28" height="28" alt="InfluxDB" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEwIiBoZWlnaHQ9IjExMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnN0MHtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+CgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSIxMTIiIHdpZHRoPSIxMTIiIHk9Ii0xIiB4PSItMSIvPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGQ9Im0xMDguMSw2Ni40bC0xMC41LC00NS43Yy0wLjYsLTIuNSAtMi45LC01IC01LjMsLTUuN2wtNDcuOSwtMTQuN2MtMC42LC0wLjIgLTEuMywtMC4zIC0yLC0wLjNjLTIuMSwwIC00LjIsMC44IC01LjYsMmwtMzQuNCwzMS45Yy0xLjgsMS43IC0yLjksNSAtMi4zLDcuNGwxMS4yLDQ4LjljMC42LDIuNSAyLjksNSA1LjMsNS43bDQ0LjgsMTMuOGMwLjYsMC4yIDEuMywwLjMgMiwwLjNjMi4xLDAgNC4yLC0wLjggNS42LC0ybDM2LjgsLTM0LjFjMS45LC0xLjggMi45LC01IDIuMywtNy41em0tNTguOCwtNTUuMmwzMi44LDEwLjFjMS4zLDAuNCAxLjMsMSAwLDEuM2wtMTcuMyw0Yy0xLjMsMC4zIC0zLjEsLTAuMyAtNCwtMS4ybC0xMi4xLC0xM2MtMSwtMS4xIC0wLjcsLTEuNiAwLjYsLTEuMnptMjAuNSw1OWMwLjMsMS4zIC0wLjUsMi4xIC0xLjgsMS43bC0zNS41LC0xMWMtMS4zLC0wLjQgLTEuNSwtMS41IC0wLjUsLTIuNGwyNy4yLC0yNS4yYzEsLTAuOSAyLC0wLjYgMi4zLDAuN2w4LjMsMzYuMnptLTU4LjUsLTMyLjNsMjguOCwtMjYuOGMxLC0wLjkgMi41LC0wLjkgMy41LDAuMWwxNC41LDE1LjZjMC45LDEgMC45LDIuNSAtMC4xLDMuNWwtMjguOSwyNi44Yy0xLDAuOSAtMi41LDAuOSAtMy41LC0wLjFsLTE0LjQsLTE1LjZjLTAuOSwtMSAtMC44LC0yLjYgMC4xLC0zLjV6bTcsNDIuNmwtNy42LC0zMy41Yy0wLjMsLTEuMyAwLjIsLTEuNiAxLjEsLTAuNmwxMi4xLDEzYzAuOSwxIDEuMywyLjggMC45LDQuMWwtNS4yLDE3Yy0wLjQsMS4zIC0xLDEuMyAtMS4zLDB6bTQyLjIsMTkuNWwtMzcuNiwtMTEuNmMtMS4zLC0wLjQgLTIsLTEuOCAtMS42LC0zLjFsNi4zLC0yMC4zYzAuNCwtMS4zIDEuOCwtMiAzLjEsLTEuNmwzNy41LDExLjZjMS4zLDAuNCAyLDEuOCAxLjYsMy4xbC02LjMsMjAuM2MtMC4zLDEuMyAtMS43LDIgLTMsMS42em0zMy40LC0yNy4zbC0yNS4yLDIzLjNjLTEsMC45IC0xLjUsMC42IC0xLjEsLTAuN2w1LjIsLTE3YzAuNCwtMS4zIDEuOCwtMi42IDMuMSwtMi45bDE3LjMsLTRjMS40LC0wLjIgMS43LDAuMyAwLjcsMS4zem0yLjgsLTVsLTIwLjcsNC43Yy0xLjMsMC4zIC0yLjYsLTAuNSAtMi45LC0xLjhsLTguOCwtMzguM2MtMC4zLC0xLjMgMC41LC0yLjYgMS44LC0yLjlsMjAuNywtNC43YzEuMywtMC4zIDIuNiwwLjUgMi45LDEuOGw4LjgsMzguM2MwLjMsMS4zIC0wLjUsMi42IC0xLjgsMi45eiIgY2xhc3M9InN0MCIgaWQ9ImN1Ym9jdGFoZWRyb24iLz4KIDwvZz4KPC9zdmc+"/>
        <span class="sf-toolbar-value">{{ collector.requests|length }}</span>
    {% endset %}
    {% set text %}
        <div class="sf-toolbar-info-piece">
            <b>InfluxDB</b>
            <span>{{ collector.requests|length }}</span>
        </div>
    {% endset %}
    {% include '@WebProfiler/Profiler/toolbar_item.html.twig' with { 'link': true } %}
{% endblock %}

{% block head %}
    {{ parent() }}
{% endblock %}

{% block menu %}
    <span class="label">
        <span class="icon">{% spaceless %}
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEwIiBoZWlnaHQ9IjExMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnN0MHtmaWxsOiNGRkZGRkY7fTwvc3R5bGU+CgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSIxMTIiIHdpZHRoPSIxMTIiIHk9Ii0xIiB4PSItMSIvPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGQ9Im0xMDguMSw2Ni40bC0xMC41LC00NS43Yy0wLjYsLTIuNSAtMi45LC01IC01LjMsLTUuN2wtNDcuOSwtMTQuN2MtMC42LC0wLjIgLTEuMywtMC4zIC0yLC0wLjNjLTIuMSwwIC00LjIsMC44IC01LjYsMmwtMzQuNCwzMS45Yy0xLjgsMS43IC0yLjksNSAtMi4zLDcuNGwxMS4yLDQ4LjljMC42LDIuNSAyLjksNSA1LjMsNS43bDQ0LjgsMTMuOGMwLjYsMC4yIDEuMywwLjMgMiwwLjNjMi4xLDAgNC4yLC0wLjggNS42LC0ybDM2LjgsLTM0LjFjMS45LC0xLjggMi45LC01IDIuMywtNy41em0tNTguOCwtNTUuMmwzMi44LDEwLjFjMS4zLDAuNCAxLjMsMSAwLDEuM2wtMTcuMyw0Yy0xLjMsMC4zIC0zLjEsLTAuMyAtNCwtMS4ybC0xMi4xLC0xM2MtMSwtMS4xIC0wLjcsLTEuNiAwLjYsLTEuMnptMjAuNSw1OWMwLjMsMS4zIC0wLjUsMi4xIC0xLjgsMS43bC0zNS41LC0xMWMtMS4zLC0wLjQgLTEuNSwtMS41IC0wLjUsLTIuNGwyNy4yLC0yNS4yYzEsLTAuOSAyLC0wLjYgMi4zLDAuN2w4LjMsMzYuMnptLTU4LjUsLTMyLjNsMjguOCwtMjYuOGMxLC0wLjkgMi41LC0wLjkgMy41LDAuMWwxNC41LDE1LjZjMC45LDEgMC45LDIuNSAtMC4xLDMuNWwtMjguOSwyNi44Yy0xLDAuOSAtMi41LDAuOSAtMy41LC0wLjFsLTE0LjQsLTE1LjZjLTAuOSwtMSAtMC44LC0yLjYgMC4xLC0zLjV6bTcsNDIuNmwtNy42LC0zMy41Yy0wLjMsLTEuMyAwLjIsLTEuNiAxLjEsLTAuNmwxMi4xLDEzYzAuOSwxIDEuMywyLjggMC45LDQuMWwtNS4yLDE3Yy0wLjQsMS4zIC0xLDEuMyAtMS4zLDB6bTQyLjIsMTkuNWwtMzcuNiwtMTEuNmMtMS4zLC0wLjQgLTIsLTEuOCAtMS42LC0zLjFsNi4zLC0yMC4zYzAuNCwtMS4zIDEuOCwtMiAzLjEsLTEuNmwzNy41LDExLjZjMS4zLDAuNCAyLDEuOCAxLjYsMy4xbC02LjMsMjAuM2MtMC4zLDEuMyAtMS43LDIgLTMsMS42em0zMy40LC0yNy4zbC0yNS4yLDIzLjNjLTEsMC45IC0xLjUsMC42IC0xLjEsLTAuN2w1LjIsLTE3YzAuNCwtMS4zIDEuOCwtMi42IDMuMSwtMi45bDE3LjMsLTRjMS40LC0wLjIgMS43LDAuMyAwLjcsMS4zem0yLjgsLTVsLTIwLjcsNC43Yy0xLjMsMC4zIC0yLjYsLTAuNSAtMi45LC0xLjhsLTguOCwtMzguM2MtMC4zLC0xLjMgMC41LC0yLjYgMS44LC0yLjlsMjAuNywtNC43YzEuMywtMC4zIDIuNiwwLjUgMi45LDEuOGw4LjgsMzguM2MwLjMsMS4zIC0wLjUsMi42IC0xLjgsMi45eiIgY2xhc3M9InN0MCIgaWQ9ImN1Ym9jdGFoZWRyb24iLz4KIDwvZz4KPC9zdmc+" alt="InfluxDB" />
            {% endspaceless %}</span>
        <strong>InfluxDB</strong>
        <span class="count">
            <span>{{ collector.requests|length }}</span>
        </span>
    </span>
{% endblock %}

{% block panel %}
    <h2>InfluxDB</h2>
    <table class="routing inline">
        <tr>
            <th>Profile</th>
            <th>Preset</th>
            <th>Value</th>
            <th>Data</th>
            <th>Connections</th>
            <th>Time</th>
        </tr>
        {% for request in collector.requests %}
            <tr>
                <td>{{ request.profile.name }}</td>
                <td>{{ request.pointPreset.name }}</td>
                <td>{{ request.value }}</td>
                <td>
                    {% set pointPresetData = {
                    measurement: request.pointPreset.measurement,
                    tags: request.pointPreset.tags,
                    fields: request.pointPreset.fields
                    } %}
                    <a href="#" title="click to show more" onClick="window.alert('{{ pointPresetData|json_encode(128)|e('js') }}')">{{ request.pointPreset.measurement }}</a>
                </td>
                <td>
                    {% for connection in request.profile.connections %}
                        {{ connection.name }}
                        ({{ connection.protocol }}{% if connection.deferred %}, deferred{% endif %})
                        {% if not loop.last %}<br />{% endif %}
                    {% endfor %}
                </td>
                <td>{{ request.dateTime|date('m/d/Y H:i:s') }}</td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
