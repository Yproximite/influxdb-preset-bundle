services:
    yproximite.influx_db_preset.client.client:
        class: Yproximite\Bundle\InfluxDbPresetBundle\Client\Client
        arguments:
            - "@event_dispatcher"
            - "@yproximite.influx_db_preset.point.point_preset_factory"
            - "@yproximite.influx_db_preset.point.point_builder_factory"

    yproximite.influx_db_preset.event_listener.extension.abstract:
        abstract: true
        class: Yproximite\Bundle\InfluxDbPresetBundle\EventListener\Extension\AbstractListener
        calls:
            - [setEventDispatcher, ["@event_dispatcher"]]

    yproximite.influx_db_preset.event_listener.influx_db:
        class: Yproximite\Bundle\InfluxDbPresetBundle\EventListener\InfluxDbListener
        arguments:
            - "@yproximite.influx_db_preset.client.client"
            - "%yproximite.influx_db_preset.default_profile_name%"

    yproximite.influx_db_preset.point.point_builder_factory:
        class: Yproximite\Bundle\InfluxDbPresetBundle\Point\PointBuilderFactory

    yproximite.influx_db_preset.point.point_preset_factory:
        class: Yproximite\Bundle\InfluxDbPresetBundle\Point\PointPresetFactory
